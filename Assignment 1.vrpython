{"mode":"Text","hardwareTarget":"brain","textContent":"#region VEXcode Generated Robot Configuration\nimport math\nimport random\nfrom vexcode_vr import *\n\n# Brain should be defined by default\nbrain=Brain()\n\ndrivetrain = Drivetrain(\"drivetrain\", 0)\npen = Pen(\"pen\", 8)\npen.set_pen_width(THIN)\nleft_bumper = Bumper(\"leftBumper\", 2)\nright_bumper = Bumper(\"rightBumper\", 3)\nfront_eye = EyeSensor(\"frontEye\", 4)\ndown_eye = EyeSensor(\"downEye\", 5)\nfront_distance = Distance(\"frontdistance\", 6)\ndistance = front_distance\nmagnet = Electromagnet(\"magnet\", 7)\nlocation = Location(\"location\", 9)\n\n#endregion VEXcode Generated Robot Configuration\nWALL_DISTANCE = 80\nSTEP_DISTANCE = 50\nCELL_SIZE = 50\nlast_was_turn = False\nheading = \"N\"\nvisited = {}\ngraph = {}\n\ndef set_pen_colour(visits):\n    if visits == 1:\n        pen.set_pen_color(GREEN)\n    elif visits == 2:\n        pen.set_pen_color(BLUE)\n    else:\n        pen.set_pen_color(RED)\n\ndef add_edge(a, b, direction):\n    if a not in graph:\n        graph[a] = {}\n    if b not in graph:\n        graph[b] = {}\n\n    graph[a][direction] = b\n\n    opposite = {\"N\":\"S\",\"S\":\"N\",\"E\":\"W\",\"W\":\"E\"}[direction]\n    graph[b][opposite] = a\n\ndef get_cell():\n    x = round(location.position(X, MM) / CELL_SIZE)\n    y = round(location.position(Y,MM) / CELL_SIZE)\n    return (x, y)\n\ndef turn_right():\n    global heading\n    drivetrain.turn_for(RIGHT, 90, DEGREES)\n    heading = {\"N\":\"E\",\"E\":\"S\",\"S\":\"W\",\"W\":\"N\"}[heading]\n\ndef turn_left():\n    global heading\n    drivetrain.turn_for(LEFT, 90, DEGREES)\n    heading = {\"N\":\"W\",\"W\":\"S\",\"S\":\"E\",\"E\":\"N\"}[heading]\n\ndef when_started1():\n    global last_was_turn\n\n    drivetrain.set_drive_velocity(40, PERCENT)\n    drivetrain.set_turn_velocity(35, PERCENT)\n\n    pen.move(DOWN)\n\n    while True:\n        wait(10, MSEC)\n\n        cell = get_cell()\n        visited[cell] = visited.get(cell, 0) + 1\n\n        front = distance.get_distance(MM)\n\n        if front > WALL_DISTANCE:\n            current = get_cell()\n\n            visits = visited[cell]\n            set_pen_colour(visits)\n\n            drivetrain.drive_for(FORWARD, STEP_DISTANCE, MM)\n\n            next_cell = get_cell()\n            add_edge(current, next_cell, heading)\n\n            last_was_turn = False\n        else:\n            drivetrain.stop()\n            wait(50, MSEC)\n\n            brain.print(graph)\n\n            # tremaux mapping stuff\n            if visited[cell] == 1:\n                turn_right()\n            else:\n                turn_left()\n\n            last_was_turn = True\n\n\nvr_thread(when_started1)\n","textLanguage":"python","robotConfig":[],"slot":0,"platform":"PG","sdkVersion":"20240802.15.00.00","appVersion":"4.63.0","minVersion":"4.60.0","fileFormat":"2.0.0","targetBrainGen":"First","v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":null},"playground":"DynamicWallMaze","robotModel":"vr"}